<h1><%=@user.name.titleize%>'s Challenge Quest Profile</h1>
<br/>
<img src= "<%=@user.image%>" width="auto" height="200px">

<h2>Username: </h2>
<p><%=@user.username%></p>

<h2>Bio: </h2>
<p><%=@user.bio%></p>

<h2>Attempted Challenges: </h2>
<ul>
    <%@user.accepted_challenges.uniq.each do |challenge|%>

        <% if challenge.attempts.find_by(status: "Completed") == nil%>
            <%nil%>
        <%else%>
            <li><%=link_to(challenge.name, challenge_path(challenge))%><br/>(<%= link_to("Mark Challenge as Complete", attempt_path(@user.attempts.find_by(challenge_id: challenge.id)), :method => :patch) %>)</li>
        <%end%>
    <%end%>
</ul>

<h2>Completed Challenges: </h2>
<ul>
    <%@user.completed_challenges.each do |challenge|%>
        <li><%=link_to(challenge.name, challenge_path(challenge))%></li>
    <%end%>
</ul>

<h2>Completed Achievements:</h2>
<ul>
    <%@user.completed_achievements.each do |achievement|%>
        <li><%=link_to(achievement.name, achievement_path(achievement))%></li>
    <%end%>
</ul>



<h2>Friends:</h2>
<ul>
  <% @user.relationships.each do |relationship| %>
  <li>
    <%= link_to(relationship.friend.username, user_path(relationship.friend.id)) %><br/>
    
    (<%= link_to "Remove Friend", relationship, :method => :delete %>)
  </li>
  <% end %>  
</ul>


<%= link_to("Edit Profile", edit_user_path)%><br/>

